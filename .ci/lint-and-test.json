{
  "name": "Lint & Test",
  "trigger": [
    {
      "event": "push",
      "branch": "main"
    },
    {
      "event": "push",
      "branch": "test"
    }
  ],
  "steps": [
    {
      "name": "clone",
      "image": "alpine",
      "commands": [
        "apk add git",
        "git init",
        "git remote add origin https://github.com/JakobStaudinger/rust-ci.git",
        "git fetch origin +refs/heads/main",
        "git checkout main"
      ]
    },
    {
      "name": "Lint",
      "image": "rust:1.77.2-alpine",
      "commands": [
        "apk add musl-dev",
        "rustup component add clippy",
        "cargo clippy"
      ]
    },
    {
      "name": "Test",
      "image": "rust:1.77.2-alpine",
      "commands": [
        "apk add musl-dev",
        "cargo test"
      ]
    }
  ]
}